import{h as y,u as L,aj as M,r as n,j as e,m as p,N as k,x as _,U as z,i as w,O as D}from"./index-BAqBDNke.js";import{D as j}from"./DecryptData-uoNSNAgf.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=y("FolderOpenDot",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}],["circle",{cx:"14",cy:"15",r:"1",key:"1gm4qj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=y("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),N=[{id:1,label:"Dashboard",icon:C,link:"/db_au_admn"},{id:2,label:"Users",icon:z,link:"/db_au_admn/userprofile"},{id:3,label:"Projects",icon:S,link:"/db_au_admn/projectusers"},{id:4,label:"Settings",icon:U,link:"/db_au_admn/admn-setting"}],O=({connection:l,admin:c})=>{const d=L();M();const[m,o]=n.useState(window.innerWidth<=768),[x,h]=n.useState(!1),[g,r]=n.useState(!1),f=()=>h(!x),b=async()=>{var t,a;try{r(!1),(await w.post(`${l}/api/adminauth/logout`,{},{withCredentials:!0})).status===200&&d("/admn-sign")}catch(i){alert((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)}};return n.useEffect(()=>{const t=()=>{o(window.innerWidth<=768),window.innerWidth>768&&h(!1)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(p.div,{className:"fixed top-0 left-0 w-full bg-black/50 backdrop-blur-lg text-white z-20 border-b border-white/10",animate:{height:x?"auto":"60px"},transition:{duration:.3,ease:"easeInOut"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(p.h1,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent",children:(c==null?void 0:c.username)||"Admin"}),m?e.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(A,{size:24})}):e.jsxs("div",{className:"flex items-center space-x-4",children:[N.map(t=>e.jsxs(k,{to:t.link,className:({isActive:a})=>`flex items-center px-4 py-2 ${a?"bg-cyan-600 text-white":"hover:bg-white/10 hover:text-gray-50"} transition-colors rounded-lg`,end:t.link==="/db_au_admn",children:[e.jsx(t.icon,{size:20}),e.jsx("span",{className:"ml-2 text-base text-gray-300",children:t.label})]},t.id)),e.jsxs("button",{className:"flex items-center px-4 py-2 text-white hover:bg-white/10 transition-colors rounded-lg bg-gray-900",onClick:()=>r(!0),children:[e.jsx(v,{size:20}),e.jsx("span",{className:"ml-2 text-base text-red-600",children:"Logout"})]})]})]}),m&&x&&e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 border-t border-white/10",children:e.jsxs("ul",{className:"flex flex-col space-y-2",children:[N.map(t=>e.jsx("li",{children:e.jsxs(k,{to:t.link,className:({isActive:a})=>`flex items-center px-4 py-2 ${a?"bg-cyan-600 text-white":"hover:bg-white/10 hover:text-gray-50"} transition-colors rounded-lg`,end:t.link==="/db_au_admn",onClick:()=>h(!1),children:[e.jsx(t.icon,{size:20}),e.jsx("span",{className:"ml-4 text-base text-gray-200",children:t.label})]})},t.id)),e.jsx("li",{children:e.jsxs("button",{className:"flex items-center w-full px-4 py-3 text-white hover:bg-white/10 transition-colors rounded-lg",onClick:()=>r(!0),children:[e.jsx(v,{size:20}),e.jsx("span",{className:"ml-4 text-base text-red-600",children:"Logout"})]})})]})})]}),e.jsx(_,{children:g&&e.jsx(p.div,{className:"fixed inset-0 flex items-center justify-center bg-black/90 backdrop-blur-3xl p-4 z-30",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(p.div,{className:"bg-white/10 backdrop-blur-lg p-6 rounded-2xl shadow-xl text-center max-w-sm w-full border border-white/20",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-300 mt-2",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 bg-red-600 hover:bg-red-700 transition rounded-lg text-white",children:"Logout"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 transition rounded-lg text-white",children:"Cancel"})]})]})})})]})},H=()=>{const l="https://electricaapp.vercel.app",[c,d]=n.useState(""),[m,o]=n.useState([]),[x,h]=n.useState([]),[g,r]=n.useState(""),f=async()=>{var a,i;try{const s=await w.get(`${l}/api/adminAuth/get_admin`,{withCredentials:!0});if(s.status===200&&s.data.encryptedData){const u=j(s.data.encryptedData);setTimeout(()=>{d(u)},1080)}else d("")}catch(s){d(""),r((i=(a=s.response)==null?void 0:a.data)==null?void 0:i.message)}},b=async()=>{var a,i;try{const s=await w.get(`${l}/api/adminAuth/get_all_users`,{withCredentials:!0});if(s.status===200&&s.data.encryptedData){const u=j(s.data.encryptedData);setTimeout(()=>{o(u)},1001)}else o([])}catch(s){o([]),r((i=(a=s.response)==null?void 0:a.data)==null?void 0:i.message)}},t=async()=>{var a,i;try{const s=await w.get(`${l}/api/adminauth/project-details`,{withCredentials:!0});if(s.status===200&&s.data.encryptedData){const u=j(s.data.encryptedData);setTimeout(()=>{h(u)},1001)}else o([])}catch(s){o([]),r((i=(a=s.response)==null?void 0:a.data)==null?void 0:i.message)}};return n.useEffect(()=>{f(),b(),t()},[]),e.jsxs("div",{className:"flex flex-col min-h-screen text-white",children:[e.jsx(O,{connection:l,admin:c}),e.jsxs("main",{className:"flex-1 p-1 lg:p-2 mt-16",children:[" ",e.jsx("div",{className:"max-w-full mx-auto",children:e.jsxs("div",{className:"md:p-5 p-2",children:[g&&e.jsx("p",{children:g}),e.jsx(D,{context:{admin:c,users:m,projects:x,fetchUsers:b,fetchProject:t,electricaURL:l}})]})})]})]})};export{H as default};
